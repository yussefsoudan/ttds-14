{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yussefsoudan/Studies/Uni/year-4-cs/TTDS/CW3/ttds-14/website/book-search-client/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/yussefsoudan/Studies/Uni/year-4-cs/TTDS/CW3/ttds-14/website/book-search-client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/yussefsoudan/Studies/Uni/year-4-cs/TTDS/CW3/ttds-14/website/book-search-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/yussefsoudan/Studies/Uni/year-4-cs/TTDS/CW3/ttds-14/website/book-search-client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Grid from'@material-ui/core/Grid';import BookCard from\"../components/BookCard.js\";import Pagination from'@material-ui/lab/Pagination';//  props will be a list of book objects\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ResultPage(_ref){var results=_ref.results,searchTerms=_ref.searchTerms;var _useState=useState({data:[],searchTerms:[],offset:1,perPageResults:10}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];console.log(\"Result page rendered\");useEffect(function(){var onRender=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"Use effect hook\");setState(_objectSpread(_objectSpread({},state),{},{data:results,searchTerms:searchTerms}));case 2:case\"end\":return _context.stop();}}},_callee);}));return function onRender(){return _ref2.apply(this,arguments);};}();onRender();},[]);var handlePaginationClick=function handlePaginationClick(offset){setState(_objectSpread(_objectSpread({},state),{},{offset:offset}));};// Calculate how many pagination page we will have \nvar length=Object.keys(state.data).length;var count;if(length%Number(state.perPageResults)==0)count=Math.floor(length/Number(state.perPageResults));else count=Math.floor(length/Number(state.perPageResults))+1;console.log(\"Page count\",count);return/*#__PURE__*/_jsx(Grid,{container:true,className:\"book-container\",spacing:6,justify:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsxs(Grid,{item:true,className:\"book-card-result\",xs:8,children:[length>state.perPageResults&&/*#__PURE__*/_jsx(Pagination,{count:count,page:state.offset,onChange:function onChange(e,offset){return handlePaginationClick(offset);}}),state.data.slice((state.offset-1)*state.perPageResults,(state.offset-1)*state.perPageResults+Number(state.perPageResults)).filter(function(book){return book.title!=null;}).map(function(book,idx){return/*#__PURE__*/_jsx(BookCard,{item:true,resultObj:book,searchTerms:state.searchTerms},idx);}),length>state.perPageResults&&/*#__PURE__*/_jsx(Pagination,{count:count,page:state.offset,onChange:function onChange(e,offset){return handlePaginationClick(offset);}})]})});};","map":{"version":3,"sources":["/Users/yussefsoudan/Studies/Uni/year-4-cs/TTDS/CW3/ttds-14/website/book-search-client/src/views/ResultPage.js"],"names":["React","useState","useEffect","Grid","BookCard","Pagination","ResultPage","results","searchTerms","data","offset","perPageResults","state","setState","console","log","onRender","handlePaginationClick","length","Object","keys","count","Number","Math","floor","e","slice","filter","book","title","map","idx"],"mappings":"4pBAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAwBC,SAAxB,KAAwC,OAAxC,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,6BAAvB,CAEA;wFACA,cAAe,SAASC,CAAAA,UAAT,MAA4C,IAAvBC,CAAAA,OAAuB,MAAvBA,OAAuB,CAAdC,WAAc,MAAdA,WAAc,eAE3BP,QAAQ,CAAC,CAC/BQ,IAAI,CAAG,EADwB,CAE/BD,WAAW,CAAG,EAFiB,CAG/BE,MAAM,CAAG,CAHsB,CAI/BC,cAAc,CAAE,EAJe,CAAD,CAFmB,wCAE9CC,KAF8C,eAEvCC,QAFuC,eASnDC,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAGAb,SAAS,CAAC,UAAM,CACd,GAAMc,CAAAA,QAAQ,2FAAG,mIACfF,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACAF,QAAQ,gCAAKD,KAAL,MAAYH,IAAI,CAACF,OAAjB,CAA0BC,WAAW,CAAGA,WAAxC,GAAR,CAFe,sDAAH,kBAARQ,CAAAA,QAAQ,2CAAd,CAIAA,QAAQ,GACT,CANQ,CAMP,EANO,CAAT,CASA,GAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACP,MAAD,CAAY,CACxCG,QAAQ,gCAAKD,KAAL,MAAWF,MAAM,CAACA,MAAlB,GAAR,CACD,CAFD,CAIA;AACA,GAAIQ,CAAAA,MAAM,CAAGC,MAAM,CAACC,IAAP,CAAYR,KAAK,CAACH,IAAlB,EAAwBS,MAArC,CACA,GAAIG,CAAAA,KAAJ,CACA,GAAIH,MAAM,CAAGI,MAAM,CAACV,KAAK,CAACD,cAAP,CAAf,EAAyC,CAA7C,CACEU,KAAK,CAAGE,IAAI,CAACC,KAAL,CAAWN,MAAM,CAACI,MAAM,CAACV,KAAK,CAACD,cAAP,CAAxB,CAAR,CADF,IAGEU,CAAAA,KAAK,CAAGE,IAAI,CAACC,KAAL,CAAWN,MAAM,CAACI,MAAM,CAACV,KAAK,CAACD,cAAP,CAAxB,EAAkD,CAA1D,CAEFG,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAyBM,KAAzB,EAGA,mBACA,KAAC,IAAD,EAAM,SAAS,KAAf,CACA,SAAS,CAAC,gBADV,CAEA,OAAO,CAAE,CAFT,CAGC,OAAO,CAAC,QAHT,CAIC,UAAU,CAAC,QAJZ,uBAME,MAAC,IAAD,EACE,IAAI,KADN,CAEE,SAAS,CAAC,kBAFZ,CAGE,EAAE,CAAE,CAHN,WAMGH,MAAM,CAAGN,KAAK,CAACD,cAAf,eACC,KAAC,UAAD,EACA,KAAK,CAAEU,KADP,CAEA,IAAI,CAAET,KAAK,CAACF,MAFZ,CAGA,QAAQ,CAAE,kBAACe,CAAD,CAAIf,MAAJ,QAAeO,CAAAA,qBAAqB,CAACP,MAAD,CAApC,EAHV,EAPJ,CAaGE,KAAK,CAACH,IAAN,CAAWiB,KAAX,CACA,CAACd,KAAK,CAACF,MAAN,CAAc,CAAf,EAAmBE,KAAK,CAACD,cADzB,CAEC,CAACC,KAAK,CAACF,MAAN,CAAa,CAAd,EAAiBE,KAAK,CAACD,cAAvB,CAAwCW,MAAM,CAACV,KAAK,CAACD,cAAP,CAF/C,EAEuEgB,MAFvE,CAE8E,SAACC,IAAD,CAAU,CACnF,MAAOA,CAAAA,IAAI,CAACC,KAAL,EAAc,IAArB,CACH,CAJF,EAIIC,GAJJ,CAIQ,SAACF,IAAD,CAAMG,GAAN,qBACH,KAAC,QAAD,EAAW,IAAI,KAAf,CAA0B,SAAS,CAAEH,IAArC,CAA2C,WAAW,CAAEhB,KAAK,CAACJ,WAA9D,EAAqBuB,GAArB,CADG,EAJR,CAbH,CAqBGb,MAAM,CAAEN,KAAK,CAACD,cAAd,eACA,KAAC,UAAD,EACA,KAAK,CAAEU,KADP,CAEA,IAAI,CAAET,KAAK,CAACF,MAFZ,CAGA,QAAQ,CAAE,kBAACe,CAAD,CAAIf,MAAJ,QAAeO,CAAAA,qBAAqB,CAACP,MAAD,CAApC,EAHV,EAtBH,GANF,EADA,CAuCP","sourcesContent":["import React, {useState,useEffect} from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport BookCard from \"../components/BookCard.js\"\nimport Pagination from '@material-ui/lab/Pagination';\n\n//  props will be a list of book objects\nexport default function ResultPage({results, searchTerms}) {\n\n      const [state, setState] = useState({\n          data : [],\n          searchTerms : [],\n          offset : 1,\n          perPageResults: 10,\n        });\n\n        console.log(\"Result page rendered\")\n\n        \n        useEffect(() => {\n          const onRender = async () => {\n            console.log(\"Use effect hook\")\n            setState({...state, data:results, searchTerms : searchTerms}) \n            }\n          onRender()\n        },[]);\n\n\n        const handlePaginationClick = (offset) => {\n          setState({...state,offset:offset})\n        }\n\n        // Calculate how many pagination page we will have \n        var length = Object.keys(state.data).length;\n        var count;\n        if (length % Number(state.perPageResults) == 0)\n          count = Math.floor(length/Number(state.perPageResults)) \n        else\n          count = Math.floor(length/Number(state.perPageResults)) + 1\n\n        console.log(\"Page count\",count)\n\n\n        return (\n        <Grid container \n        className=\"book-container\" \n        spacing={6}\n         justify=\"center\"   \n         alignItems=\"center\" \n         >\n          <Grid \n            item \n            className=\"book-card-result\"\n            xs={8}\n          >\n\n            {length > state.perPageResults &&\n              <Pagination \n              count={count} \n              page={state.offset} \n              onChange={(e, offset) => handlePaginationClick(offset)} />\n            }\n\n            {state.data.slice(\n             (state.offset -1 )*state.perPageResults, \n              (state.offset-1)*state.perPageResults + Number(state.perPageResults)).filter((book) => {\n                  return book.title != null;\n              }).map((book,idx) =>\n                  <BookCard  item key={idx} resultObj={book} searchTerms={state.searchTerms} />\n              )}\n\n            {length> state.perPageResults &&\n             <Pagination \n             count={count} \n             page={state.offset} \n             onChange={(e, offset) => handlePaginationClick(offset)} />\n            }\n\n          </Grid>\n        </Grid> \n        \n        )\n};\n\n\n"]},"metadata":{},"sourceType":"module"}