{"ast":null,"code":"var _jsxFileName = \"/Users/yussefsoudan/Studies/Uni/year-4-cs/TTDS/CW3/ttds-14/website/book-search-client/src/components/SearchBar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Button from '@material-ui/core/Button';\nimport SearchFeatures from \"./SearchFeatures.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst axios = require('axios');\n\nconst useStyles = makeStyles(theme => ({\n  heroContent: {\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(8, 0, 6)\n  },\n  heroButtons: {\n    marginTop: theme.spacing(4)\n  },\n  margin: {\n    margin: theme.spacing(1)\n  }\n}));\nexport default function SearchBar(props) {\n  _s();\n\n  const classes = useStyles();\n  const [state, setState] = useState({\n    quote: \"\",\n    bookSearch: false,\n    author: \"\",\n    bookTitle: \"\",\n    genre: \"\",\n    yearTo: 2021,\n    yearFrom: 1990,\n    minRating: 1,\n    correction: \"\"\n  });\n  const ref = useRef(null);\n\n  const handleChange = event => {\n    setState({ ...state,\n      quote: event.target.value\n    }); // Spellcheck\n\n    axios.post('http://127.0.0.1:5000' + '/spellcheck', {\n      search_text: event.target.value\n    }).then(res => {\n      if (res['data']['correction_exists']) {\n        setState({ ...state,\n          correction: res['data']['corrected_text'],\n          quote: event.target.value\n        });\n      } else {\n        setState({ ...state,\n          correction: \"\",\n          quote: event.target.value\n        });\n      }\n    }).catch(err => {\n      console.log(\"ERROR RETRIEVINGG CORRECTION: \" + err);\n    });\n  };\n\n  const handleSearchFeaturesChange = (param, value) => {\n    setState({ ...state,\n      [param]: value\n    });\n    console.log(\"Search features input:\", param, value);\n  };\n\n  const handleClear = event => {\n    event.preventDefault();\n    setState({ ...state,\n      quote: \"\",\n      apiResponse: {},\n      success: false\n    });\n    ref.current.handleClear();\n  };\n\n  const handleSpellCorrect = () => {\n    setState({ ...state,\n      quote: state.correction,\n      correction: \"\"\n    });\n  };\n\n  const handleSubmit = () => {\n    // Validate input \n    // If input is correct then make the request otherwise change state\n    // and display appropriate component\n    // findQuoteRequest();\n    props.handleRequest(state);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.heroContent,\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"sm\",\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          component: \"h1\",\n          variant: \"h2\",\n          align: \"center\",\n          color: \"textPrimary\",\n          gutterBottom: true,\n          children: \"Search a book by a quote\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          className: classes.margin,\n          label: \"Type your quote...\",\n          multiline: true,\n          rowsMax: 4,\n          value: state.quote,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h7\",\n          align: \"center\",\n          color: \"textSecondary\",\n          paragraph: true,\n          style: {\n            \"fontStyle\": \"italic\",\n            \"cursor\": \"pointer\"\n          },\n          onClick: handleSpellCorrect,\n          children: state.correction.length != 0 ? \"Did you mean '\" + state.correction + \"'?\" : \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          align: \"center\",\n          color: \"textSecondary\",\n          paragraph: true,\n          value: \"hi\",\n          children: \"Try to type something short and leading about the book you are looking for\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(SearchFeatures, {\n          ref: ref,\n          handleChange: handleSearchFeaturesChange,\n          authors: props.authors,\n          book_titles: props.book_titles\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.heroButtons,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 2,\n            justify: \"center\",\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"contained\",\n                color: \"primary\",\n                onClick: handleSubmit,\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outlined\",\n                color: \"primary\",\n                onClick: handleClear,\n                children: \"Clear\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)\n  }, void 0, false);\n}\n\n_s(SearchBar, \"seAKQ0TiEUpO/sZNhUIluG2WZ2A=\", false, function () {\n  return [useStyles];\n});\n\n_c = SearchBar;\n\nvar _c;\n\n$RefreshReg$(_c, \"SearchBar\");","map":{"version":3,"sources":["/Users/yussefsoudan/Studies/Uni/year-4-cs/TTDS/CW3/ttds-14/website/book-search-client/src/components/SearchBar.js"],"names":["React","useState","useRef","Grid","TextField","makeStyles","Typography","Container","Button","SearchFeatures","axios","require","useStyles","theme","heroContent","backgroundColor","palette","background","paper","padding","spacing","heroButtons","marginTop","margin","SearchBar","props","classes","state","setState","quote","bookSearch","author","bookTitle","genre","yearTo","yearFrom","minRating","correction","ref","handleChange","event","target","value","post","search_text","then","res","catch","err","console","log","handleSearchFeaturesChange","param","handleClear","preventDefault","apiResponse","success","current","handleSpellCorrect","handleSubmit","handleRequest","length","authors","book_titles"],"mappings":"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","sourcesContent":["import React ,{useState,useRef} from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Button from '@material-ui/core/Button';\nimport SearchFeatures from \"./SearchFeatures.js\";\nconst axios = require('axios');\n\nconst useStyles = makeStyles((theme) => ({\n\n      heroContent: {\n        backgroundColor: theme.palette.background.paper,\n        padding: theme.spacing(8, 0, 6),\n      },\n      heroButtons: {\n        marginTop: theme.spacing(4),\n      },\n      margin: {\n        margin: theme.spacing(1),\n      },\n  }));\n  \n\n\nexport default function SearchBar(props) {\n    const classes = useStyles();\n\n    const [state, setState] = useState({\n        quote:\"\",\n        bookSearch : false,\n        author : \"\",\n        bookTitle: \"\",\n        genre: \"\",\n        yearTo : 2021,\n        yearFrom: 1990,\n        minRating:1,\n        correction: \"\"\n    });\n\n\n    const ref = useRef(null);\n\n\n    const handleChange = (event) => {\n      setState({...state,quote: event.target.value})\n      // Spellcheck\n      axios.post('http://127.0.0.1:5000' + '/spellcheck',{\n        search_text: event.target.value\n      }).then(res => {\n      if (res['data']['correction_exists']) {\n        setState({...state,correction: res['data']['corrected_text'], quote: event.target.value})\n      } else {\n        setState({...state,correction: \"\", quote: event.target.value})\n      }\n      }).catch(err => {\n      console.log(\"ERROR RETRIEVINGG CORRECTION: \" + err)\n      });\n        \n    };\n    \n    const handleSearchFeaturesChange = (param,value) =>{\n        setState({...state, [param]:value});\n        console.log(\"Search features input:\",param,value);\n    }\n    \n    const handleClear=(event)=> {\n        event.preventDefault();\n        setState({...state, quote:\"\",apiResponse:{},success : false})\n        ref.current.handleClear();\n\n    }\n\n    const handleSpellCorrect= () => {\n      setState({...state, quote: state.correction, correction: \"\"})\n    }\n\n    \n    const handleSubmit = () =>{\n        // Validate input \n        // If input is correct then make the request otherwise change state\n        // and display appropriate component\n        // findQuoteRequest();\n\n        props.handleRequest(state)\n        \n    }\n\n    \n    return(\n    <>\n        <div className={classes.heroContent}>\n          <Container maxWidth=\"sm\">\n            <Typography component=\"h1\" variant=\"h2\" align=\"center\" color=\"textPrimary\" gutterBottom>\n              Search a book by a quote\n            </Typography>\n           \n           {/* Search Bar */}\n            <TextField \n            fullWidth \n            className={classes.margin} \n            label=\"Type your quote...\"\n            multiline\n            rowsMax={4}\n            value={state.quote}\n            onChange={handleChange}\n            ></TextField>\n\n            <Typography variant=\"h7\" align=\"center\" color=\"textSecondary\" paragraph style={{\"fontStyle\" : \"italic\", \"cursor\" : \"pointer\"}} onClick={handleSpellCorrect}>\n              {state.correction.length != 0 ? \"Did you mean '\" + state.correction + \"'?\": \"\"}\n            </Typography>\n\n            <Typography variant=\"h5\" align=\"center\" color=\"textSecondary\" paragraph value={\"hi\"}>\n              Try to type something short and leading about the book you are looking for\n            </Typography>\n\n            {/* Search features component  */}\n            <SearchFeatures ref= {ref} handleChange={handleSearchFeaturesChange}  authors={props.authors} book_titles={props.book_titles} />\n\n            {/* Buttons */}\n            <div className={classes.heroButtons}>\n              <Grid container spacing={2} justify=\"center\">\n                <Grid item>\n                  <Button variant=\"contained\" color=\"primary\" onClick={handleSubmit}>\n                    Submit\n                  </Button>\n                </Grid>\n                <Grid item>\n                  <Button variant=\"outlined\" color=\"primary\" onClick={handleClear}>\n                    Clear\n                  </Button>\n                </Grid>\n              </Grid>\n            </div>\n          </Container>\n        </div>\n        \n    </>\n    )\n\n}\n\n"]},"metadata":{},"sourceType":"module"}