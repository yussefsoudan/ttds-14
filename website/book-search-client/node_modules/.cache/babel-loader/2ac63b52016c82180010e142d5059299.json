{"ast":null,"code":"import _defineProperty from\"/Users/yussefsoudan/Studies/Uni/year-4-cs/TTDS/CW3/ttds-14/website/book-search-client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/yussefsoudan/Studies/Uni/year-4-cs/TTDS/CW3/ttds-14/website/book-search-client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/yussefsoudan/Studies/Uni/year-4-cs/TTDS/CW3/ttds-14/website/book-search-client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import Grid from'@material-ui/core/Grid';import TextField from'@material-ui/core/TextField';import{makeStyles}from'@material-ui/core/styles';import Typography from'@material-ui/core/Typography';import Container from'@material-ui/core/Container';import Button from'@material-ui/core/Button';import SearchFeatures from\"./SearchFeatures.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var axios=require('axios');var useStyles=makeStyles(function(theme){return{heroContent:{backgroundColor:theme.palette.background.paper,padding:theme.spacing(8,0,6)},heroButtons:{marginTop:theme.spacing(4)},margin:{margin:theme.spacing(1)}};});export default function SearchBar(props){var classes=useStyles();var _useState=useState({quote:\"\",bookSearch:false,author:\"\",bookTitle:\"\",genre:\"\",yearTo:2021,yearFrom:1990,minRating:1,correction:\"\"}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var ref=useRef(null);var handleChange=function handleChange(event){setState(_objectSpread(_objectSpread({},state),{},{quote:event.target.value}));// Spellcheck\naxios.post('https://188.166.173.191:5000'+'/spellcheck',{search_text:event.target.value}).then(function(res){if(res['data']['correction_exists']){setState(_objectSpread(_objectSpread({},state),{},{correction:res['data']['corrected_text'],quote:event.target.value}));}else{setState(_objectSpread(_objectSpread({},state),{},{correction:\"\",quote:event.target.value}));}}).catch(function(err){console.log(\"ERROR RETRIEVING CORRECTION: \"+err);});};var handleSearchFeaturesChange=function handleSearchFeaturesChange(param,value){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},param,value)));console.log(\"Search features input:\",param,value);};var handleClear=function handleClear(event){event.preventDefault();setState(_objectSpread(_objectSpread({},state),{},{quote:\"\",apiResponse:{},success:false}));ref.current.handleClear();};var handleSpellCorrect=function handleSpellCorrect(){setState(_objectSpread(_objectSpread({},state),{},{quote:state.correction,correction:\"\"}));};var handleSubmit=function handleSubmit(){// Validate input \n// If input is correct then make the request otherwise change state\n// and display appropriate component\n// findQuoteRequest();\nprops.handleRequest(state);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:classes.heroContent,children:/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",children:[/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h2\",align:\"center\",color:\"textPrimary\",gutterBottom:true,children:\"Search a book by a quote\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,className:classes.margin,label:\"Type your quote...\",multiline:true,rowsMax:4,value:state.quote,onChange:handleChange}),/*#__PURE__*/_jsx(Typography,{variant:\"h7\",align:\"center\",color:\"textSecondary\",paragraph:true,style:{\"fontStyle\":\"italic\",\"cursor\":\"pointer\"},onClick:handleSpellCorrect,children:state.correction.length!=0?\"Did you mean '\"+state.correction+\"'?\":\"\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",align:\"center\",color:\"textSecondary\",paragraph:true,value:\"hi\",children:\"Try to type something short and leading about the book you are looking for\"}),/*#__PURE__*/_jsx(SearchFeatures,{ref:ref,handleChange:handleSearchFeaturesChange,authors:props.authors,book_titles:props.book_titles}),/*#__PURE__*/_jsx(\"div\",{className:classes.heroButtons,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,justify:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleSubmit,children:\"Submit\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",onClick:handleClear,children:\"Clear\"})})]})})]})})});}","map":{"version":3,"sources":["/Users/yussefsoudan/Studies/Uni/year-4-cs/TTDS/CW3/ttds-14/website/book-search-client/src/components/SearchBar.js"],"names":["React","useState","useRef","Grid","TextField","makeStyles","Typography","Container","Button","SearchFeatures","axios","require","useStyles","theme","heroContent","backgroundColor","palette","background","paper","padding","spacing","heroButtons","marginTop","margin","SearchBar","props","classes","quote","bookSearch","author","bookTitle","genre","yearTo","yearFrom","minRating","correction","state","setState","ref","handleChange","event","target","value","post","search_text","then","res","catch","err","console","log","handleSearchFeaturesChange","param","handleClear","preventDefault","apiResponse","success","current","handleSpellCorrect","handleSubmit","handleRequest","length","authors","book_titles"],"mappings":"yfAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAwBC,MAAxB,KAAqC,OAArC,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,qBAA3B,C,6IACA,GAAMC,CAAAA,KAAK,CAAGC,OAAO,CAAC,OAAD,CAArB,CAEA,GAAMC,CAAAA,SAAS,CAAGP,UAAU,CAAC,SAACQ,KAAD,QAAY,CAEnCC,WAAW,CAAE,CACXC,eAAe,CAAEF,KAAK,CAACG,OAAN,CAAcC,UAAd,CAAyBC,KAD/B,CAEXC,OAAO,CAAEN,KAAK,CAACO,OAAN,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,CAFE,CAFsB,CAMnCC,WAAW,CAAE,CACXC,SAAS,CAAET,KAAK,CAACO,OAAN,CAAc,CAAd,CADA,CANsB,CASnCG,MAAM,CAAE,CACNA,MAAM,CAAEV,KAAK,CAACO,OAAN,CAAc,CAAd,CADF,CAT2B,CAAZ,EAAD,CAA5B,CAgBA,cAAe,SAASI,CAAAA,SAAT,CAAmBC,KAAnB,CAA0B,CACrC,GAAMC,CAAAA,OAAO,CAAGd,SAAS,EAAzB,CADqC,cAGXX,QAAQ,CAAC,CAC/B0B,KAAK,CAAC,EADyB,CAE/BC,UAAU,CAAG,KAFkB,CAG/BC,MAAM,CAAG,EAHsB,CAI/BC,SAAS,CAAE,EAJoB,CAK/BC,KAAK,CAAE,EALwB,CAM/BC,MAAM,CAAG,IANsB,CAO/BC,QAAQ,CAAE,IAPqB,CAQ/BC,SAAS,CAAC,CARqB,CAS/BC,UAAU,CAAE,EATmB,CAAD,CAHG,wCAG9BC,KAH8B,eAGvBC,QAHuB,eAgBrC,GAAMC,CAAAA,GAAG,CAAGpC,MAAM,CAAC,IAAD,CAAlB,CAGA,GAAMqC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC9BH,QAAQ,gCAAKD,KAAL,MAAWT,KAAK,CAAEa,KAAK,CAACC,MAAN,CAAaC,KAA/B,GAAR,CACA;AACAhC,KAAK,CAACiC,IAAN,CAAW,+BAAiC,aAA5C,CAA0D,CACxDC,WAAW,CAAEJ,KAAK,CAACC,MAAN,CAAaC,KAD8B,CAA1D,EAEGG,IAFH,CAEQ,SAAAC,GAAG,CAAI,CACf,GAAIA,GAAG,CAAC,MAAD,CAAH,CAAY,mBAAZ,CAAJ,CAAsC,CACpCT,QAAQ,gCAAKD,KAAL,MAAWD,UAAU,CAAEW,GAAG,CAAC,MAAD,CAAH,CAAY,gBAAZ,CAAvB,CAAsDnB,KAAK,CAAEa,KAAK,CAACC,MAAN,CAAaC,KAA1E,GAAR,CACD,CAFD,IAEO,CACLL,QAAQ,gCAAKD,KAAL,MAAWD,UAAU,CAAE,EAAvB,CAA2BR,KAAK,CAAEa,KAAK,CAACC,MAAN,CAAaC,KAA/C,GAAR,CACD,CACA,CARD,EAQGK,KARH,CAQS,SAAAC,GAAG,CAAI,CAChBC,OAAO,CAACC,GAAR,CAAY,gCAAkCF,GAA9C,EACC,CAVD,EAYD,CAfD,CAiBA,GAAMG,CAAAA,0BAA0B,CAAG,QAA7BA,CAAAA,0BAA6B,CAACC,KAAD,CAAOV,KAAP,CAAgB,CAC/CL,QAAQ,gCAAKD,KAAL,wBAAagB,KAAb,CAAoBV,KAApB,GAAR,CACAO,OAAO,CAACC,GAAR,CAAY,wBAAZ,CAAqCE,KAArC,CAA2CV,KAA3C,EACH,CAHD,CAKA,GAAMW,CAAAA,WAAW,CAAC,QAAZA,CAAAA,WAAY,CAACb,KAAD,CAAU,CACxBA,KAAK,CAACc,cAAN,GACAjB,QAAQ,gCAAKD,KAAL,MAAYT,KAAK,CAAC,EAAlB,CAAqB4B,WAAW,CAAC,EAAjC,CAAoCC,OAAO,CAAG,KAA9C,GAAR,CACAlB,GAAG,CAACmB,OAAJ,CAAYJ,WAAZ,GAEH,CALD,CAOA,GAAMK,CAAAA,kBAAkB,CAAE,QAApBA,CAAAA,kBAAoB,EAAM,CAC9BrB,QAAQ,gCAAKD,KAAL,MAAYT,KAAK,CAAES,KAAK,CAACD,UAAzB,CAAqCA,UAAU,CAAE,EAAjD,GAAR,CACD,CAFD,CAKA,GAAMwB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAK,CACtB;AACA;AACA;AACA;AAEAlC,KAAK,CAACmC,aAAN,CAAoBxB,KAApB,EAEH,CARD,CAWA,mBACA,sCACI,YAAK,SAAS,CAAEV,OAAO,CAACZ,WAAxB,uBACE,MAAC,SAAD,EAAW,QAAQ,CAAC,IAApB,wBACE,KAAC,UAAD,EAAY,SAAS,CAAC,IAAtB,CAA2B,OAAO,CAAC,IAAnC,CAAwC,KAAK,CAAC,QAA9C,CAAuD,KAAK,CAAC,aAA7D,CAA2E,YAAY,KAAvF,sCADF,cAME,KAAC,SAAD,EACA,SAAS,KADT,CAEA,SAAS,CAAEY,OAAO,CAACH,MAFnB,CAGA,KAAK,CAAC,oBAHN,CAIA,SAAS,KAJT,CAKA,OAAO,CAAE,CALT,CAMA,KAAK,CAAEa,KAAK,CAACT,KANb,CAOA,QAAQ,CAAEY,YAPV,EANF,cAgBE,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,KAAK,CAAC,QAA/B,CAAwC,KAAK,CAAC,eAA9C,CAA8D,SAAS,KAAvE,CAAwE,KAAK,CAAE,CAAC,YAAc,QAAf,CAAyB,SAAW,SAApC,CAA/E,CAA+H,OAAO,CAAEmB,kBAAxI,UACGtB,KAAK,CAACD,UAAN,CAAiB0B,MAAjB,EAA2B,CAA3B,CAA+B,iBAAmBzB,KAAK,CAACD,UAAzB,CAAsC,IAArE,CAA2E,EAD9E,EAhBF,cAoBE,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,KAAK,CAAC,QAA/B,CAAwC,KAAK,CAAC,eAA9C,CAA8D,SAAS,KAAvE,CAAwE,KAAK,CAAE,IAA/E,wFApBF,cAyBE,KAAC,cAAD,EAAgB,GAAG,CAAGG,GAAtB,CAA2B,YAAY,CAAIa,0BAA3C,CAAwE,OAAO,CAAE1B,KAAK,CAACqC,OAAvF,CAAgG,WAAW,CAAErC,KAAK,CAACsC,WAAnH,EAzBF,cA4BE,YAAK,SAAS,CAAErC,OAAO,CAACL,WAAxB,uBACE,MAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,CAA4B,OAAO,CAAC,QAApC,wBACE,KAAC,IAAD,EAAM,IAAI,KAAV,uBACE,KAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,KAAK,CAAC,SAAlC,CAA4C,OAAO,CAAEsC,YAArD,oBADF,EADF,cAME,KAAC,IAAD,EAAM,IAAI,KAAV,uBACE,KAAC,MAAD,EAAQ,OAAO,CAAC,UAAhB,CAA2B,KAAK,CAAC,SAAjC,CAA2C,OAAO,CAAEN,WAApD,mBADF,EANF,GADF,EA5BF,GADF,EADJ,EADA,CAmDH","sourcesContent":["import React ,{useState,useRef} from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport Button from '@material-ui/core/Button';\nimport SearchFeatures from \"./SearchFeatures.js\";\nconst axios = require('axios');\n\nconst useStyles = makeStyles((theme) => ({\n\n      heroContent: {\n        backgroundColor: theme.palette.background.paper,\n        padding: theme.spacing(8, 0, 6),\n      },\n      heroButtons: {\n        marginTop: theme.spacing(4),\n      },\n      margin: {\n        margin: theme.spacing(1),\n      },\n  }));\n  \n\n\nexport default function SearchBar(props) {\n    const classes = useStyles();\n\n    const [state, setState] = useState({\n        quote:\"\",\n        bookSearch : false,\n        author : \"\",\n        bookTitle: \"\",\n        genre: \"\",\n        yearTo : 2021,\n        yearFrom: 1990,\n        minRating:1,\n        correction: \"\"\n    });\n\n\n    const ref = useRef(null);\n\n\n    const handleChange = (event) => {\n      setState({...state,quote: event.target.value})\n      // Spellcheck\n      axios.post('https://188.166.173.191:5000' + '/spellcheck',{\n        search_text: event.target.value\n      }).then(res => {\n      if (res['data']['correction_exists']) {\n        setState({...state,correction: res['data']['corrected_text'], quote: event.target.value})\n      } else {\n        setState({...state,correction: \"\", quote: event.target.value})\n      }\n      }).catch(err => {\n      console.log(\"ERROR RETRIEVING CORRECTION: \" + err)\n      });\n        \n    };\n    \n    const handleSearchFeaturesChange = (param,value) =>{\n        setState({...state, [param]:value});\n        console.log(\"Search features input:\",param,value);\n    }\n    \n    const handleClear=(event)=> {\n        event.preventDefault();\n        setState({...state, quote:\"\",apiResponse:{},success : false})\n        ref.current.handleClear();\n\n    }\n\n    const handleSpellCorrect= () => {\n      setState({...state, quote: state.correction, correction: \"\"})\n    }\n\n    \n    const handleSubmit = () =>{\n        // Validate input \n        // If input is correct then make the request otherwise change state\n        // and display appropriate component\n        // findQuoteRequest();\n\n        props.handleRequest(state)\n        \n    }\n\n    \n    return(\n    <>\n        <div className={classes.heroContent}>\n          <Container maxWidth=\"sm\">\n            <Typography component=\"h1\" variant=\"h2\" align=\"center\" color=\"textPrimary\" gutterBottom>\n              Search a book by a quote\n            </Typography>\n           \n           {/* Search Bar */}\n            <TextField \n            fullWidth \n            className={classes.margin} \n            label=\"Type your quote...\"\n            multiline\n            rowsMax={4}\n            value={state.quote}\n            onChange={handleChange}\n            ></TextField>\n\n            <Typography variant=\"h7\" align=\"center\" color=\"textSecondary\" paragraph style={{\"fontStyle\" : \"italic\", \"cursor\" : \"pointer\"}} onClick={handleSpellCorrect}>\n              {state.correction.length != 0 ? \"Did you mean '\" + state.correction + \"'?\": \"\"}\n            </Typography>\n\n            <Typography variant=\"h5\" align=\"center\" color=\"textSecondary\" paragraph value={\"hi\"}>\n              Try to type something short and leading about the book you are looking for\n            </Typography>\n\n            {/* Search features component  */}\n            <SearchFeatures ref= {ref} handleChange = {handleSearchFeaturesChange}  authors={props.authors} book_titles={props.book_titles} />\n\n            {/* Buttons */}\n            <div className={classes.heroButtons}>\n              <Grid container spacing={2} justify=\"center\">\n                <Grid item>\n                  <Button variant=\"contained\" color=\"primary\" onClick={handleSubmit}>\n                    Submit\n                  </Button>\n                </Grid>\n                <Grid item>\n                  <Button variant=\"outlined\" color=\"primary\" onClick={handleClear}>\n                    Clear\n                  </Button>\n                </Grid>\n              </Grid>\n            </div>\n          </Container>\n        </div>\n        \n    </>\n    )\n\n}\n\n"]},"metadata":{},"sourceType":"module"}