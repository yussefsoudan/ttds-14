(this["webpackJsonpbook-search-client"]=this["webpackJsonpbook-search-client"]||[]).push([[0],{131:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(14),c=r.n(o),s=(r(98),r(13)),i=(r(99),r(15)),l=r.n(i),u=r(8),h=r(18),j=r(187),b=r(194),g=r(132),d=r(177),m=r(193),O=r(195),p=r(12),f=r(182),x=r(184),v=r(180),y=r(183),k=r(185),T=r(4),C=r(186),R=r(77),w=r.n(R),S=r(58),N=r.n(S),q=r(74),B=r.n(q),F=r(75),_=r.n(F),I=r(2),P=Object(d.a)((function(e){return{root:{display:"flex",marginTop:"5%",marginBottom:"5%",border:"0.2em solid lightgrey"},cover:{maxWidth:120,minWidth:120,padding:7,objectFit:"cover"},details:{display:"flex",flexDirection:"column",minWidth:"75%"},content:{},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));function E(e){for(var t=e.resultObj,r=e.searchTerms,n=P(),o=a.a.useState(!1),c=Object(s.a)(o,2),i=c[0],l=c[1],u=t,h=t.quote?t.quote:"",j=(h.split(" "),""),b=0;b<u.authors.length;b++)b==u.authors.length-1?j+=u.authors[b]:j+=u.authors[b]+", ";var d=Object(I.jsxs)(v.a,{style:{fontStyle:"italic"},children:[Object(I.jsxs)(g.a,{gutterBottom:!0,variant:"h6",component:"h2",children:["\u2013\u2013\u2013 Book categories: ",u.categories]}),Object(I.jsxs)(g.a,{gutterBottom:!0,variant:"h6",component:"h2",children:["\u2013\u2013\u2013 Number of pages: ",u.pageCount]}),Object(I.jsxs)(g.a,{gutterBottom:!0,variant:"h6",component:"h2",children:["\u2013\u2013\u2013 Published date: ",u.publishedDate]}),Object(I.jsxs)(g.a,{gutterBottom:!0,variant:"h6",component:"h2",children:["\u2013\u2013\u2013 ISBN: ",u["isbn-13"]]}),Object(I.jsxs)(g.a,{gutterBottom:!0,variant:"h6",component:"h2",children:["\u2013\u2013\u2013 Average rating: ",Object(I.jsx)(_.a,{stars:u.averageRating,size:15,spacing:2,fill:"#ea9c46"})]}),Object(I.jsxs)(g.a,{gutterBottom:!0,variant:"h6",component:"h2",children:["\u2013\u2013\u2013 Number of ratings: ",u.ratingsCount]})]}),m=d;h.length>300?m=Object(I.jsx)(B.a,{lines:3,more:"Show more",less:"Show less",className:"content-css",anchorClass:"my-anchor-css-class",expanded:!1,width:0,children:Object(I.jsx)("q",{cite:"https://www.mozilla.org/en-US/about/history/details/",children:Object(I.jsx)(N.a,{highlightClassName:"YourHighlightClass",searchWords:r,autoEscape:!0,textToHighlight:h})})}):h.length<=300&&h.length>0&&(m=Object(I.jsx)("q",{cite:"https://www.mozilla.org/en-US/about/history/details/",children:Object(I.jsx)(N.a,{highlightClassName:"YourHighlightClass",searchWords:r,autoEscape:!0,textToHighlight:h})}));return Object(I.jsxs)(f.a,{className:n.root,children:[Object(I.jsx)(y.a,{className:n.cover,children:Object(I.jsx)("img",{src:u.thumbnail,style:{"max-height":"100%","max-width":"100%",border:"0.2em solid black","border-radius":"0.1em"}})}),Object(I.jsxs)("div",{className:n.details,children:[Object(I.jsxs)(v.a,{className:n.content,children:[Object(I.jsx)(g.a,{variant:"h5",component:"h2",children:u.title}),Object(I.jsx)(g.a,{gutterBottom:!0,component:"h3",children:j}),Object(I.jsx)(g.a,{gutterBottom:!0,component:"h4",variant:"h6",style:{color:"darkblue","font-style":"italic"},children:m}),Object(I.jsx)(x.a,{disableRipple:!0,size:"small",color:"primary",href:u.previewLink,target:"_blank",style:{cursor:"pointer",textTransform:"none",backgroundColor:"transparent"},children:"View on Google Books"}),Object(I.jsx)("hr",{style:{color:"lightblue",align:"left",width:"100%"}})]}),h.length>0?Object(I.jsx)(k.a,{className:Object(T.a)(n.expand,Object(p.a)({},n.expandOpen,i)),onClick:function(){l(!i)},"aria-expanded":i,"aria-label":"show more",children:Object(I.jsx)(w.a,{})}):"",h.length>0?Object(I.jsx)(C.a,{in:i,timeout:"auto",unmountOnExit:!0,children:h.length>0?d:""}):""]})]})}var L=r(198),W=r(200),A=r(188);function M(e){var t=e.results,r=e.searchTerms,a=Object(n.useState)({data:[],searchTerms:[],offset:1,perPageResults:10,sort:!1}),o=Object(s.a)(a,2),c=o[0],i=o[1];console.log("Result page rendered"),Object(n.useEffect)((function(){(function(){var e=Object(h.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Use effect hook"),i(Object(u.a)(Object(u.a)({},c),{},{data:t,searchTerms:r}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var b,g=function(e){i(Object(u.a)(Object(u.a)({},c),{},{offset:e}))},d=function(e,t){return e.sort((function(e,r){var n=e[t],a=r[t];return n<a?1:n>a?-1:0}))},m=Object.keys(c.data).length;return b=m%Number(c.perPageResults)==0?Math.floor(m/Number(c.perPageResults)):Math.floor(m/Number(c.perPageResults))+1,console.log("Page count",b),Object(I.jsx)(j.a,{container:!0,className:"book-container",spacing:6,justify:"center",alignItems:"center",children:Object(I.jsxs)(j.a,{item:!0,className:"book-card-result",xs:8,children:[m>0&&Object(I.jsxs)(j.a,{container:!0,spacing:3,children:[m>c.perPageResults&&Object(I.jsx)(j.a,{item:!0,xs:8,children:Object(I.jsx)(L.a,{count:b,page:c.offset,onChange:function(e,t){return g(t)}})}),Object(I.jsx)(j.a,{item:!0,xs:2,children:Object(I.jsx)(A.a,{control:Object(I.jsx)(W.a,{checked:c.sort,onChange:function(e){return function(e){console.log("Sort");var t=c.data;t=d(t,"averageRating"),i(Object(u.a)(Object(u.a)({},c),{},{sort:e,data:t,sorting:!1})),console.log("Sorted results",c.data)}(e.target.checked)},name:"sort",color:"primary"}),label:"Average Rating",labelPlacement:"End"})})]}),c.data.slice((c.offset-1)*c.perPageResults,(c.offset-1)*c.perPageResults+Number(c.perPageResults)).filter((function(e){return null!=e.title})).map((function(e,t){return Object(I.jsx)(E,{item:!0,resultObj:e,searchTerms:c.searchTerms},t)})),m>c.perPageResults&&Object(I.jsx)(L.a,{count:b,page:c.offset,onChange:function(e,t){return g(t)}})]})})}for(var Y=r(35),D="https://188.166.173.191:5000",G=function(){var e=Object(h.a)(l.a.mark((function e(t,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request endpoint",D+t),e.abrupt("return",Y.post(D+t,{quote:r.quote,author:r.author,bookTitle:r.bookTitle,genre:r.genre,yearTo:r.yearTo,yearFrom:r.yearFrom,minRating:r.minRating,responseType:"json"}).then((function(e){return console.log("res in callAPI is: "+JSON.stringify(e)),e.data})).catch((function(e){throw e})));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),H=r(201),J=r(202),z=r(196),U=r(199),V=r(192),K=r(197),Q=Object(d.a)((function(e){return{formControl:{minWidth:120}}})),X=[],Z=1990;Z<2022;Z++)X.push(Z);var $=["Fiction","Biography & Autobiography","Juvenile Fiction","Poetry","Young Adult Fiction","Philosophy","Young Adult Nonfiction","True Crime","Indic fiction (English)"],ee=Object(n.forwardRef)((function(e,t){var r=Q(),a=e.authors,o=e.book_titles,c=Object(n.useState)({bookSearch:!1,author:"",bookTitle:"",genre:"",yearFrom:1990,yearTo:2021,minRating:1}),i=Object(s.a)(c,2),l=i[0],h=i[1],b=function(t,r){console.log("Field",t),console.log("Value",r),h(Object(u.a)(Object(u.a)({},l),{},Object(p.a)({},t,r))),e.handleChange(t,r)},g=function(){h(Object(u.a)(Object(u.a)({},l),{},{author:"",bookTitle:"",genre:"",yearFrom:1990,yearTo:2021}))};return Object(n.useImperativeHandle)(t,(function(){return{handleClear:g}})),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(j.a,{container:!0,children:Object(I.jsx)(A.a,{control:Object(I.jsx)(W.a,{checked:l.bookSearch,onChange:function(e){return b("bookSearch",e.target.checked)},name:"bookSearch",color:"primary"}),label:"Book Search"})}),Object(I.jsxs)(j.a,{container:!0,spacing:1,children:[Object(I.jsxs)(j.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(I.jsx)(j.a,{container:!0,item:!0,xs:4,children:Object(I.jsx)(K.a,{id:"book-title-select",options:o,getOptionLabel:function(e){return e.book_title},style:{width:300},renderInput:function(e){return Object(I.jsx)(H.a,Object(u.a)(Object(u.a)({},e),{},{label:"Book Title"}))},onChange:function(e,t){return b("bookTitle",t?t.book_title:t)}})}),Object(I.jsx)(j.a,{container:!0,item:!0,xs:4,children:Object(I.jsx)(K.a,{id:"author-select",options:a,getOptionLabel:function(e){return e.name},style:{width:300},renderInput:function(e){return Object(I.jsx)(H.a,Object(u.a)(Object(u.a)({},e),{},{label:"Author"}))},onChange:function(e,t){return b("author",t?t.name:t)}})}),Object(I.jsx)(j.a,{container:!0,item:!0,xs:4,children:Object(I.jsxs)(V.a,{className:r.formControl,children:[Object(I.jsx)(U.a,{id:"genre",children:"Genre"}),Object(I.jsx)(z.a,{labelId:"genre-selcet",id:"genre-select",value:l.genre,onChange:function(e){return b("genre",e.target.value)},children:$.map((function(e){return Object(I.jsx)(J.a,{value:e,children:e},e)}))})]})})]}),Object(I.jsxs)(j.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(I.jsx)(j.a,{container:!0,item:!0,xs:4,children:Object(I.jsxs)(V.a,{className:r.formControl,children:[Object(I.jsx)(U.a,{id:"year-from",children:"Year From"}),Object(I.jsx)(z.a,{labelId:"year-from-select",id:"year-from-select",value:l.yearFrom,onChange:function(e){return b("yearFrom",e.target.value)},children:X.map((function(e){return Object(I.jsx)(J.a,{value:e,children:e},e)}))})]})}),Object(I.jsx)(j.a,{container:!0,item:!0,xs:4,children:Object(I.jsxs)(V.a,{className:r.formControl,children:[Object(I.jsx)(U.a,{id:"year-to",children:"Year To"}),Object(I.jsx)(z.a,{labelId:"year-to-select",id:"year-to-select",value:l.yearTo,onChange:function(e){return b("yearTo",e.target.value)},children:X.map((function(e){return Object(I.jsx)(J.a,{value:e,children:e},e)}))})]})}),Object(I.jsx)(j.a,{container:!0,item:!0,xs:4,children:Object(I.jsxs)(V.a,{className:r.formControl,children:[Object(I.jsx)(U.a,{id:"rating",children:"Min. Rating"}),Object(I.jsx)(z.a,{labelId:"rating-selcet",id:"rating-select",value:l.minRating,onChange:function(e){return b("minRating",e.target.value)},children:[1,2,3,4,5].map((function(e){return Object(I.jsx)(J.a,{value:e,children:e},e)}))})]})})]})]})]})})),te=r(35),re=Object(d.a)((function(e){return{heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},margin:{margin:e.spacing(1)}}}));function ne(e){var t=re(),r=Object(n.useState)({quote:"",bookSearch:!1,author:"",bookTitle:"",genre:"",yearTo:2021,yearFrom:1990,minRating:1,correction:""}),a=Object(s.a)(r,2),o=a[0],c=a[1],i=Object(n.useRef)(null);return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)("div",{className:t.heroContent,children:Object(I.jsxs)(m.a,{maxWidth:"sm",children:[Object(I.jsx)(g.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0,children:"Search a book by a quote"}),Object(I.jsx)(H.a,{fullWidth:!0,className:t.margin,label:"Type your quote...",multiline:!0,rowsMax:4,value:o.quote,onChange:function(e){c(Object(u.a)(Object(u.a)({},o),{},{quote:e.target.value})),te.post("https://188.166.173.191:5000/spellcheck",{search_text:e.target.value}).then((function(t){t.data.correction_exists?c(Object(u.a)(Object(u.a)({},o),{},{correction:t.data.corrected_text,quote:e.target.value})):c(Object(u.a)(Object(u.a)({},o),{},{correction:"",quote:e.target.value}))})).catch((function(e){console.log("ERROR RETRIEVINGG CORRECTION: "+e)}))}}),Object(I.jsx)(g.a,{variant:"h7",align:"center",color:"textSecondary",paragraph:!0,style:{fontStyle:"italic",cursor:"pointer"},onClick:function(){c(Object(u.a)(Object(u.a)({},o),{},{quote:o.correction,correction:""}))},children:0!=o.correction.length?"Did you mean '"+o.correction+"'?":""}),Object(I.jsx)(g.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0,value:"hi",children:"Try to type something short and leading about the book you are looking for"}),Object(I.jsx)(ee,{ref:i,handleChange:function(e,t){c(Object(u.a)(Object(u.a)({},o),{},Object(p.a)({},e,t))),console.log("Search features input:",e,t)},authors:e.authors,book_titles:e.book_titles}),Object(I.jsx)("div",{className:t.heroButtons,children:Object(I.jsxs)(j.a,{container:!0,spacing:2,justify:"center",children:[Object(I.jsx)(j.a,{item:!0,children:Object(I.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(){e.handleRequest(o)},children:"Submit"})}),Object(I.jsx)(j.a,{item:!0,children:Object(I.jsx)(x.a,{variant:"outlined",color:"primary",onClick:function(e){e.preventDefault(),c(Object(u.a)(Object(u.a)({},o),{},{quote:"",apiResponse:{},success:!1})),i.current.handleClear()},children:"Clear"})})]})})]})})})}var ae=r(35),oe=function(){var e=Object(h.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ae.post("https://188.166.173.191:5000/get_all_authors",{responseType:"json"}).then((function(e){return console.log("res in callAPI is: "+JSON.stringify(e)),e.data})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=r(35),se=function(){var e=Object(h.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ce.post("https://188.166.173.191:5000/get_all_book_titles",{responseType:"json"}).then((function(e){return console.log("res in callAPI is: "+JSON.stringify(e)),e.data})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=Object(d.a)((function(e){return{icon:{marginRight:e.spacing(2)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},margin:{margin:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:120}}}));function le(){var e=ie(),t=Object(n.useState)({apiResponse:{books:[]},searchTerms:[],isLoading:!1,errorOccur:!1,errorMsg:"",success:!1,authors:[],book_titles:[]}),r=Object(s.a)(t,2),o=r[0],c=r[1];console.log("Search page render"),Object(n.useEffect)((function(){console.log("Hook to get author names"),function(){var e=Object(h.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r=[],e.next=4,oe().then((function(e){t=e.authors})).catch((function(e){console.log("Error response",e)}));case 4:return e.next=6,se().then((function(e){r=e.book_titles})).catch((function(e){console.log("Error response",e)}));case 6:c(Object(u.a)(Object(u.a)({},o),{},{book_titles:r,authors:t}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var i=function(){var e=Object(h.a)(l.a.mark((function e(t){var r,n,a,s,i,h,j,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.quote,n=t.bookSearch,a=t.author,s=t.bookTitle,i=t.genre,h=t.yearFrom,j=t.yearTo,b=t.minRating,c(Object(u.a)(Object(u.a)({},o),{},{isLoading:!0,requestError:"",apiResponse:""})),console.log(o.isLoading),e.next=5,G(n?"/books_search":"/quotes_search",{quote:r,author:a,bookTitle:s,genre:i,yearFrom:h,yearTo:j,minRating:b}).then((function(e){c(Object(u.a)(Object(u.a)({},o),{},{isLoading:!1,apiResponse:{books:e.books},requestError:"",success:!0,errorOccur:!1,searchTerms:e.searchTerms}))})).catch((function(e){c(Object(u.a)(Object(u.a)({},o),{},{isLoading:!1,success:!1,errorOccur:!0,errorMsg:e,apiResponse:{quote:""}}))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)(a.a.Fragment,{children:[Object(I.jsx)(b.a,{}),Object(I.jsxs)("main",{children:[Object(I.jsx)(ne,{handleRequest:i,authors:o.authors,book_titles:o.book_titles}),Object(I.jsxs)(m.a,{className:e.cardGrid,maxWidth:"md",children:[o.isLoading?Object(I.jsx)(j.a,{container:!0,justify:"center",alignItems:"center",children:Object(I.jsx)(O.a,{})}):o.success&&(o.apiResponse.books.length>0?Object(I.jsx)(M,{results:o.apiResponse.books,searchTerms:o.searchTerms}):Object(I.jsx)(g.a,{variant:"h6",align:"center",color:"primary",className:"error-message",children:"It seems there were no results for your query."})),o.errorOccur&&Object(I.jsx)(g.a,{variant:"h6",align:"center",color:"error",className:"error-message",children:"Your request has timed out. The error message is: ".concat(o.errorMsg)})]})]}),Object(I.jsxs)("footer",{className:e.footer,children:[Object(I.jsx)(g.a,{variant:"h6",align:"center",gutterBottom:!0,children:"Footer"}),Object(I.jsx)(g.a,{variant:"subtitle1",align:"center",color:"textSecondary",component:"p",children:"Something here to give the footer a purpose!"})]})]})}r(35),r(35);var ue=function(){var e=Object(n.useState)({connectDB:{isLoading:!1,error:""}}),t=Object(s.a)(e,2);return t[0],t[1],Object(I.jsx)("div",{children:Object(I.jsx)(le,{})})},he=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,204)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),o(e),c(e)}))};c.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(ue,{})}),document.getElementById("root")),he()},98:function(e,t,r){},99:function(e,t,r){}},[[131,1,2]]]);
//# sourceMappingURL=main.cbe93064.chunk.js.map