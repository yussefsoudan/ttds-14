(this["webpackJsonpbook-search-client"]=this["webpackJsonpbook-search-client"]||[]).push([[0],{129:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(14),c=r.n(o),s=(r(96),r(97),r(17)),i=r.n(s),l=r(8),u=r(24),h=r(13),j=r(184),b=r(191),g=r(130),d=r(174),p=r(190),m=r(192),O=r(12),f=r(178),x=r(181),v=r(180),y=r(179),k=r(182),C=r(4),w=r(183),T=r(79),S=r.n(T),R=r(59),N=r.n(R),B=r(60),q=r.n(B),A=r(77),I=r.n(A),_=r(2),F=Object(d.a)((function(e){return{root:{display:"flex",marginTop:"5%",marginBottom:"5%",border:"0.2em solid lightgrey"},cover:{maxWidth:120,minWidth:120,padding:7,objectFit:"cover"},details:{display:"flex",flexDirection:"column",minWidth:"75%"},content:{},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));function P(e){for(var t=e.resultObj,r=e.searchTerms,n=e.searchQuote,o=F(),c=a.a.useState(!1),s=Object(h.a)(c,2),i=s[0],l=s[1],u=t,j=t.quote?t.quote:"",b=(j.split(" "),""),d=0;d<u.authors.length;d++)d==u.authors.length-1?b+=u.authors[d]:b+=u.authors[d]+", ";var p=Object(_.jsxs)("div",{style:{fontStyle:"italic"},children:[Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"Book description"}),Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h7",component:"h5",children:void 0==u.description||null==u.description||""==u.description?"No book description available.":Object(_.jsxs)(q.a,{lines:1,more:"Show more",less:"Show less",className:"content-css",anchorClass:"my-anchor-css-class",expanded:!1,width:0,children:[" ",u.description]})}),Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"Average rating"}),Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h7",component:"h5",children:""!=u.averageRating?Object(_.jsx)(I.a,{stars:u.averageRating,size:20,spacing:2,fill:"#ea9c46"}):"No ratings were given to this book."}),Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"Number of ratings"}),Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h7",component:"h5",children:""!=u.ratingsCount?u.ratingsCount:"No ratings were given to this book."}),Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"Book categories"}),Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h7",component:"h5",children:u.categories}),Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"Number of pages"}),Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h7",component:"h5",children:""!=u.pageCount?u.pageCount:"No page count is available."}),Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"Published date"}),Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h7",component:"h5",children:""!=u.publishedDate?u.publishedDate:"No publication date is available."}),Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h6",component:"h2",children:"ISBN"}),Object(_.jsx)(g.a,{gutterBottom:!0,variant:"h7",component:"h5",children:u["isbn-13"]})]}),m=p;j.length>300?m=Object(_.jsx)(q.a,{lines:3,more:"Show more",less:"Show less",className:"content-css",anchorClass:"my-anchor-css-class",expanded:!1,width:0,children:Object(_.jsx)("q",{cite:"https://www.mozilla.org/en-US/about/history/details/",children:Object(_.jsx)(N.a,{highlightClassName:"YourHighlightClass",searchWords:n.includes('"')?[n.replaceAll('"',"").replaceAll(",","").replaceAll(";","")]:r,autoEscape:!0,textToHighlight:j})})}):j.length<=300&&j.length>0&&(m=Object(_.jsx)("q",{cite:"https://www.mozilla.org/en-US/about/history/details/",children:Object(_.jsx)(N.a,{highlightClassName:"YourHighlightClass",searchWords:n.includes('"')?[n.replaceAll('"',"").replaceAll(",","").replaceAll(";","")]:r,autoEscape:!0,textToHighlight:j})}));return Object(_.jsxs)(f.a,{className:o.root,children:[Object(_.jsx)(y.a,{className:o.cover,children:Object(_.jsx)("img",{src:u.thumbnail,style:{"max-height":"100%","max-width":"100%",border:"0.2em solid black","border-radius":"0.1em"}})}),Object(_.jsxs)("div",{className:o.details,children:[Object(_.jsxs)(v.a,{className:o.content,children:[Object(_.jsx)(g.a,{variant:"h5",component:"h2",children:u.title}),Object(_.jsx)(g.a,{gutterBottom:!0,component:"h3",children:b}),Object(_.jsx)(g.a,{gutterBottom:!0,component:"h3",children:m==p?m:""}),Object(_.jsx)(g.a,{gutterBottom:!0,component:"h4",variant:"h6",style:{color:"darkblue","font-style":"italic"},children:m==p?"":m}),Object(_.jsx)(x.a,{disableRipple:!0,size:"small",color:"primary",href:u.previewLink,target:"_blank",style:{cursor:"pointer",textTransform:"none",backgroundColor:"transparent"},children:"View on Google Books"}),Object(_.jsx)("hr",{style:{color:"lightblue",align:"left",width:"100%"}})]}),j.length>0?Object(_.jsx)(k.a,{className:Object(C.a)(o.expand,Object(O.a)({},o.expandOpen,i)),onClick:function(){l(!i)},"aria-expanded":i,"aria-label":"show more",children:Object(_.jsx)(S.a,{})}):"",j.length>0?Object(_.jsx)(w.a,{in:i,timeout:"auto",unmountOnExit:!0,children:j.length>0?Object(_.jsx)(v.a,{children:p}):""}):""]})]})}var L=r(195),E=r(197),H=r(193),W=r(196),M=r(185),Q=Object(d.a)((function(e){return{formControl:{minWidth:120}}}));function D(e){var t=e.results,r=e.searchTerms,a=e.searchQuote,o=Q(),c=Object(n.useState)({data:[],searchTerms:[],offset:1,perPageResults:10,sort:!1,searchQuote:""}),s=Object(h.a)(c,2),b=s[0],g=s[1];console.log("Result page rendered"),Object(n.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Use effect hook"),g(Object(l.a)(Object(l.a)({},b),{},{data:t,searchTerms:r,searchQuote:a}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var d,p=function(e){g(Object(l.a)(Object(l.a)({},b),{},{offset:e}))},m=function(e,t){return e.sort((function(e,r){var n=e[t],a=r[t];return n<a?-1:n>a?1:0}))},O=function(e,t){return e.sort((function(e,r){var n=e[t],a=r[t];return n<a?1:n>a?-1:0}))},f=Object.keys(b.data).length;return d=f%Number(b.perPageResults)==0?Math.floor(f/Number(b.perPageResults)):Math.floor(f/Number(b.perPageResults))+1,console.log("Page count",d),Object(_.jsx)(j.a,{container:!0,className:"book-container",spacing:6,justify:"center",alignItems:"center",children:Object(_.jsxs)(j.a,{item:!0,className:"book-card-result",xs:8,children:[f>0&&Object(_.jsxs)(j.a,{container:!0,spacing:3,children:[f>b.perPageResults&&Object(_.jsx)(j.a,{item:!0,xs:8,children:Object(_.jsx)(L.a,{count:d,page:b.offset,onChange:function(e,t){return p(t)}})}),Object(_.jsx)(j.a,{item:!0,xs:2,children:Object(_.jsxs)(M.a,{className:o.formControl,children:[Object(_.jsx)(W.a,{id:"genre",children:"Sort by"}),Object(_.jsxs)(H.a,{labelId:"sort-selcet",id:"sort-select",onChange:function(e){return function(e,t){console.log("Sort");var r=e.split("-")[1],n=e.split("-")[0],a=b.data;a="ASC"==r?m(a,n):O(a,n),g(Object(l.a)(Object(l.a)({},b),{},{sort:t,data:a,sorting:!1})),console.log("Sorted results",b.data)}(e.target.value,!0)},children:[Object(_.jsx)(E.a,{value:"title-ASC",children:"Book title: A-Z"}),Object(_.jsx)(E.a,{value:"title-DSC",children:"Book title: Z-A"}),Object(_.jsx)(E.a,{value:"averageRating-DSC",children:"Average rating: High-to-Low"}),Object(_.jsx)(E.a,{value:"averageRating-ASC",children:"Average rating: Low-to-High"}),Object(_.jsx)(E.a,{value:"pageCount-DSC",children:"Page count: High-to-Low"}),Object(_.jsx)(E.a,{value:"pageCount-ASC",children:"Page count: Low-to-High"}),Object(_.jsx)(E.a,{value:"ratingsCount-DSC",children:"Number of ratings: High-to-Low"}),Object(_.jsx)(E.a,{value:"ratingsCount-ASC",children:"Number of ratings: Low-to-High"})]})]})})]}),b.data.slice((b.offset-1)*b.perPageResults,(b.offset-1)*b.perPageResults+Number(b.perPageResults)).filter((function(e){return null!=e.title})).map((function(e,t){return Object(_.jsx)(P,{item:!0,resultObj:e,searchTerms:b.searchTerms,searchQuote:b.searchQuote},t)})),f>b.perPageResults&&Object(_.jsx)(L.a,{count:d,page:b.offset,onChange:function(e,t){return p(t)}})]})})}for(var Y=r(47),G="http://188.166.173.191:5000",J=function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("request endpoint",G+t),e.abrupt("return",Y.post(G+t,{quote:r.quote,author:r.author,bookTitle:r.bookTitle,genre:r.genre,yearTo:r.yearTo,yearFrom:r.yearFrom,minRating:r.minRating,responseType:"json"}).then((function(e){return console.log("res in callAPI is: "+JSON.stringify(e)),e.data})).catch((function(e){throw e})));case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),z=r(198),U=r(199),V=r(189),Z=r(194),K=Object(d.a)((function(e){return{formControl:{minWidth:120}}})),X=[],$=1990;$<2022;$++)X.push($);var ee=["All","Fiction","Biography & Autobiography","Juvenile Fiction","Poetry","Young Adult Fiction","Philosophy","Young Adult Nonfiction","True Crime","Indic fiction (English)"],te=Object(n.forwardRef)((function(e,t){var r=K(),a=e.authors,o=e.book_titles,c=Object(n.useState)({bookSearch:!1,author:"",bookTitle:"",genre:"",yearFrom:1990,yearTo:2021,minRating:1}),s=Object(h.a)(c,2),i=s[0],u=s[1],b=function(t,r){console.log("Field",t),console.log("Value",r),u(Object(l.a)(Object(l.a)({},i),{},Object(O.a)({},t,r))),e.handleChange(t,r)},g=function(){u(Object(l.a)(Object(l.a)({},i),{},{author:"",bookTitle:"",genre:"",yearFrom:1990,yearTo:2021}))};return Object(n.useImperativeHandle)(t,(function(){return{handleClear:g}})),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(j.a,{container:!0,children:Object(_.jsx)(V.a,{control:Object(_.jsx)(U.a,{checked:i.bookSearch,onChange:function(e){return b("bookSearch",e.target.checked)},name:"bookSearch",color:"primary"}),label:"Book Search"})}),Object(_.jsxs)(j.a,{container:!0,spacing:1,children:[Object(_.jsxs)(j.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(j.a,{container:!0,item:!0,xs:4,children:Object(_.jsx)(Z.a,{id:"book-title-select",options:o,getOptionLabel:function(e){return e.book_title},style:{width:300},renderInput:function(e){return Object(_.jsx)(z.a,Object(l.a)(Object(l.a)({},e),{},{label:"Book Title"}))},onChange:function(e,t){return b("bookTitle",t?t.book_title:t)}})}),Object(_.jsx)(j.a,{container:!0,item:!0,xs:4,children:Object(_.jsx)(Z.a,{id:"author-select",options:a,getOptionLabel:function(e){return e.name},style:{width:300},renderInput:function(e){return Object(_.jsx)(z.a,Object(l.a)(Object(l.a)({},e),{},{label:"Author"}))},onChange:function(e,t){return b("author",t?t.name:t)}})}),Object(_.jsx)(j.a,{container:!0,item:!0,xs:4,children:Object(_.jsxs)(M.a,{className:r.formControl,children:[Object(_.jsx)(W.a,{id:"genre",children:"Genre"}),Object(_.jsx)(H.a,{labelId:"genre-selcet",id:"genre-select",value:i.genre,onChange:function(e){return b("genre",e.target.value)},children:ee.map((function(e){return Object(_.jsx)(E.a,{value:e,children:e},e)}))})]})})]}),Object(_.jsxs)(j.a,{container:!0,item:!0,xs:12,spacing:3,children:[Object(_.jsx)(j.a,{container:!0,item:!0,xs:4,children:Object(_.jsx)(z.a,{className:r.formControl,label:"Year From",labelId:"year-from-select",id:"year-from-select",rowsMax:1,value:i.yearFrom,onChange:function(e){return b("yearFrom",""!=e.target.value?parseInt(e.target.value):"")}})}),Object(_.jsx)(j.a,{container:!0,item:!0,xs:4,children:Object(_.jsx)(z.a,{className:r.formControl,label:"Year To",labelId:"year-to-select",id:"year-to-select",rowsMax:1,value:i.yearTo,onChange:function(e){return b("yearTo",""!=e.target.value?parseInt(e.target.value):"")}})}),Object(_.jsx)(j.a,{container:!0,item:!0,xs:4,children:Object(_.jsxs)(M.a,{className:r.formControl,children:[Object(_.jsx)(W.a,{id:"rating",children:"Min. Rating"}),Object(_.jsx)(H.a,{labelId:"rating-selcet",id:"rating-select",value:i.minRating,onChange:function(e){return b("minRating",e.target.value)},children:[1,2,3,4,5].map((function(e){return Object(_.jsx)(E.a,{value:e,children:e},e)}))})]})})]})]})]})})),re=r(47),ne=Object(d.a)((function(e){return{heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},margin:{margin:e.spacing(1)}}}));function ae(e){var t=ne(),r=Object(n.useState)({quote:"",bookSearch:!1,author:"",bookTitle:"",genre:"",yearTo:2021,yearFrom:1990,minRating:1,correction:""}),a=Object(h.a)(r,2),o=a[0],c=a[1],s=Object(n.useRef)(null);return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("div",{className:t.heroContent,children:Object(_.jsxs)(p.a,{maxWidth:"sm",children:[Object(_.jsx)(g.a,{component:"h4",variant:"h4",align:"center",color:"textPrimary",gutterBottom:!0,children:"Search for a book by its title, by a quote or even by a phrase!"}),Object(_.jsx)(z.a,{fullWidth:!0,className:t.margin,label:o.bookSearch?"Type your book title terms...":"Type your quote terms...",multiline:!0,rowsMax:4,value:o.quote,onChange:function(e){c(Object(l.a)(Object(l.a)({},o),{},{quote:e.target.value})),re.post("http://188.166.173.191:5000/spellcheck",{search_text:e.target.value}).then((function(t){t.data.correction_exists?c(Object(l.a)(Object(l.a)({},o),{},{correction:t.data.corrected_text,quote:e.target.value})):c(Object(l.a)(Object(l.a)({},o),{},{correction:"",quote:e.target.value}))})).catch((function(e){console.log("ERROR RETRIEVINGG CORRECTION: "+e)}))}}),Object(_.jsx)(g.a,{variant:"h7",align:"center",color:"textSecondary",paragraph:!0,style:{fontStyle:"italic",cursor:"pointer"},onClick:function(){c(Object(l.a)(Object(l.a)({},o),{},{quote:o.correction,correction:""}))},children:0!=o.correction.length?"Did you mean '"+o.correction+"'?":""}),Object(_.jsx)(g.a,{variant:"caption",align:"center",color:"textSecondary",paragraph:!0,value:"hi",style:{fontStyle:"italic"},children:"Tip: For phrase search, the less common your terms the faster your phrase will be retrieved!"}),Object(_.jsx)(te,{ref:s,handleChange:function(e,t){c(Object(l.a)(Object(l.a)({},o),{},Object(O.a)({},e,t))),console.log("Search features input:",e,t)},authors:e.authors,book_titles:e.book_titles}),Object(_.jsx)("div",{className:t.heroButtons,children:Object(_.jsxs)(j.a,{container:!0,spacing:2,justify:"center",children:[Object(_.jsx)(j.a,{item:!0,children:Object(_.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(){e.handleRequest(o)},children:"Search"})}),Object(_.jsx)(j.a,{item:!0,children:Object(_.jsx)(x.a,{variant:"outlined",color:"primary",onClick:function(e){e.preventDefault(),c(Object(l.a)(Object(l.a)({},o),{},{quote:"",apiResponse:{},success:!1})),s.current.handleClear()},children:"Clear"})})]})})]})})})}var oe=r(47),ce=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oe.post("http://188.166.173.191:5000/get_all_authors",{responseType:"json"}).then((function(e){return console.log("res in callAPI is: "+JSON.stringify(e)),e.data})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=r(47),ie=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",se.post("http://188.166.173.191:5000/get_all_book_titles",{responseType:"json"}).then((function(e){return console.log("res in callAPI is: "+JSON.stringify(e)),e.data})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=Object(d.a)((function(e){return{icon:{marginRight:e.spacing(2)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},margin:{margin:e.spacing(1)},formControl:{margin:e.spacing(1),minWidth:120}}}));function ue(){var e=le(),t=Object(n.useState)({apiResponse:{books:[]},searchTerms:[],searchQuote:"",isLoading:!1,errorOccur:!1,errorMsg:"",success:!1,authors:[],book_titles:[]}),r=Object(h.a)(t,2),o=r[0],c=r[1];console.log("Search page render"),Object(n.useEffect)((function(){console.log("Hook to get author names"),function(){var e=Object(u.a)(i.a.mark((function e(){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r=[],e.next=4,ce().then((function(e){t=e.authors})).catch((function(e){console.log("Error response",e)}));case 4:return e.next=6,ie().then((function(e){r=e.book_titles})).catch((function(e){console.log("Error response",e)}));case 6:c(Object(l.a)(Object(l.a)({},o),{},{book_titles:r,authors:t}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var s=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,n,a,s,u,h,j,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.quote,n=t.bookSearch,a=t.author,s=t.bookTitle,u=t.genre,h=t.yearFrom,j=t.yearTo,b=t.minRating,c(Object(l.a)(Object(l.a)({},o),{},{isLoading:!0,requestError:"",apiResponse:""})),console.log(o.isLoading),e.next=5,J(n?"/books_search":"/quotes_search",{quote:r,author:a,bookTitle:s,genre:u,yearFrom:h,yearTo:j,minRating:b}).then((function(e){c(Object(l.a)(Object(l.a)({},o),{},{isLoading:!1,apiResponse:{books:e.books},requestError:"",success:!0,errorOccur:!1,searchTerms:e.searchTerms,searchQuote:r}))})).catch((function(e){c(Object(l.a)(Object(l.a)({},o),{},{isLoading:!1,success:!1,errorOccur:!0,errorMsg:e,apiResponse:{quote:""}}))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsxs)(a.a.Fragment,{children:[Object(_.jsx)(b.a,{}),Object(_.jsxs)("main",{children:[Object(_.jsx)(ae,{handleRequest:s,authors:o.authors,book_titles:o.book_titles}),Object(_.jsxs)(p.a,{className:e.cardGrid,maxWidth:"md",children:[o.isLoading?Object(_.jsx)(j.a,{container:!0,justify:"center",alignItems:"center",children:Object(_.jsx)(m.a,{})}):o.success&&(o.apiResponse.books.length>0?Object(_.jsx)(D,{results:o.apiResponse.books,searchTerms:o.searchTerms,searchQuote:o.searchQuote}):Object(_.jsx)(g.a,{variant:"h6",align:"center",color:"primary",className:"error-message",children:"It seems there were no results for your query."})),o.errorOccur&&!o.isLoading&&Object(_.jsx)(g.a,{variant:"h6",align:"center",color:"error",className:"error-message",children:"Your request has timed out. The error message is: ".concat(o.errorMsg)})]})]})]})}var he=function(){return Object(_.jsx)("div",{children:Object(_.jsx)(ue,{})})};c.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(he,{})}),document.getElementById("root"))},96:function(e,t,r){},97:function(e,t,r){}},[[129,1,2]]]);
//# sourceMappingURL=main.2fc163f1.chunk.js.map